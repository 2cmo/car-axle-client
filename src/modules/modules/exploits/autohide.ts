import { moduleDefinition } from '../../moduleapi'

const hideEvent = new KeyboardEvent('keydown', {
    key: '\\',
})

function hide(event: Event): void {
    if (document.getElementById('cac__CONTAINER')) {
        document.dispatchEvent(hideEvent)
    }
}

function waittohide() {
    window.addEventListener('blur', (e) => hide(e))
}

const plugin: moduleDefinition = {
    display_name: 'Auto Hide',
    description: 'Automatically hides UI when the tab/window changes (press "\\" to unhide once hidden)',
    id: 'autohide',
    section: 'exploit',
    onactive: waittohide,
    always: true,
    custom_render: false,
}

export default plugin
